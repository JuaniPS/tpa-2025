<div th:fragment="filtros" class="hechos-column">
    <div class="results-header">
        <h3 class="results-title">Filtros</h3>
    </div>
    <div class="hechos-list">
        <form th:action="@{/colecciones/{handle}(handle=${handle})}" th:object="${filtros}" method="post">
            <div class="curated-container" id="curatedContainer"
                 th:classappend="${filtros.curado != null && filtros.curado} ? 'active' : ''">
                <div class="curated-label">
                    <label for="curado" class="curated-label-text">Búsqueda curada</label>
                    <span class="curated-label-description">
                        Se muestran exclusivamente hechos respaldados por consenso de múltiples fuentes.
                    </span>
                </div>
                <div class="toggle-switch" id="toggleCurado"
                     th:classappend="${filtros.curado != null && filtros.curado} ? 'active' : ''">
                    <input type="checkbox" id="curado" name="curado" th:checked="*{curado}">
                    <div class="toggle-knob"></div>
                </div>
            </div>

            <div class="info-alert" id="curatedInfo" style="display: none;">
                <strong>Búsqueda curada:</strong> Se muestran exclusivamente hechos respaldados por consenso de
                múltiples fuentes.
            </div>

            <div class="toggle-container">
                <div class="toggle-label">
                    <svg class="icon-svg" style="margin-right: 4px;" fill="none" stroke="currentColor"
                         viewBox="0 0 24 24">
                        <rect x="2" y="3" width="20" height="18" rx="2" stroke="#E88827" stroke-width="2"/>
                        <circle cx="7" cy="9" r="2" fill="#E88827"/>
                        <path d="M2 16L6 12L10 16L15 11L22 18V19C22 20.1046 21.1046 21 20 21H4C2.89543 21 2 20.1046 2 19V16Z"
                              fill="#E88827"/>
                    </svg>
                    <label for="soloConMultimedia">Solo con multimedia</label>
                </div>
                <div class="toggle-switch" id="toggleMultimedia"
                     th:classappend="${filtros.soloConMultimedia != null && filtros.soloConMultimedia} ? 'active' : ''">
                    <input type="checkbox" id="soloConMultimedia" name="soloConMultimedia"
                           th:checked="*{soloConMultimedia}">
                    <div class="toggle-knob"></div>
                </div>
            </div>

            <div class="toggle-container">
                <div class="toggle-label">
                    <svg class="icon-svg" style="margin-right: 4px;" fill="none" stroke="currentColor"
                         viewBox="0 0 24 24">
                        <circle cx="12" cy="7" r="3.5" stroke="#E88827" stroke-width="2"/>
                        <path d="M5 21C5 16.5817 8.58172 13 13 13C17.4183 13 21 16.5817 21 21" stroke="#E88827"
                              stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <label for="soloConContribuyente">Por contribuyentes</label>
                </div>
                <div class="toggle-switch" id="toggleContribuyente"
                     th:classappend="${filtros.soloConContribuyente != null && filtros.soloConContribuyente} ? 'active' : ''">
                    <input type="checkbox" id="soloConContribuyente" name="soloConContribuyente"
                           th:checked="${soloConContribuyente}">
                    <div class="toggle-knob"></div>
                </div>
            </div>

            <div class="form-group">
                <label for="categoria" class="form-label">
                    <svg class="icon-svg" style="margin-right: 4px;" fill="none" stroke="currentColor"
                         viewBox="0 0 24 24">
                        <rect x="3" y="3" width="8" height="8" rx="1.5" stroke="#E88827" stroke-width="2"/>
                        <rect x="13" y="3" width="8" height="8" rx="1.5" stroke="#E88827" stroke-width="2"/>
                        <rect x="3" y="13" width="8" height="8" rx="1.5" stroke="#E88827" stroke-width="2"/>
                        <rect x="13" y="13" width="8" height="8" rx="1.5" stroke="#E88827" stroke-width="2"/>
                    </svg>
                    Categoría
                </label>
                <select id="categoria" class="form-input" th:field="*{categoria}">
                    <option value="" selected>Todas las categorías</option>
                    <option th:each="item : ${listaCategorias}"
                            th:value="${item}"
                            th:text="${item}">
                    </option>
                </select>
            </div>

            <!-- Date Range -->
            <div class="form-group">
                <label class="form-label">
                    <svg class="icon-svg" style="margin-right: 4px;" fill="none" stroke="currentColor"
                         viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    Fecha de acontecimiento
                </label>
                <div class="date-grid">
                    <div>
                        <div class="date-label">Desde</div>
                        <input type="date" class="form-input" th:field="*{fechaAcontecimientoDesde}">
                    </div>
                    <div>
                        <div class="date-label">Hasta</div>
                        <input type="date" class="form-input" th:field="*{fechaAcontecimientoHasta}">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <svg class="icon-svg" style="margin-right: 4px;" fill="none" stroke="currentColor"
                         viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    Fecha de reporte
                </label>
                <div class="date-grid">
                    <div>
                        <div class="date-label">Desde</div>
                        <input type="date" class="form-input" th:field="*{fechaReporteDesde}">
                    </div>
                    <div>
                        <div class="date-label">Hasta</div>
                        <input type="date" class="form-input" th:field="*{fechaReporteHasta}">
                    </div>
                </div>
            </div>

            <button class="btn-primary w-full" type="submit">
                Aplicar Filtros
            </button>
            <a th:href="@{/colecciones/{handle}(handle=${handle})}" class="btn btn-secondary w-full" style="margin-top: 0.5rem;">
                Limpiar Filtros
            </a>

    </div>
    </form>
</div>
</div>